!function(){"use strict";function r(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function e(e,n){if(e){if("string"===typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}function n(n){return function(e){if(Array.isArray(e))return r(e)}(n)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(n)||e(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(r,n){var t="undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=e(r))||n&&r&&"number"===typeof r.length){t&&(r=t);var o=0,a=function(){};return{s:a,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,f=!1;return{s:function(){t=t.call(r)},n:function(){var r=t.next();return l=r.done,r},e:function(r){f=!0,i=r},f:function(){try{l||null==t.return||t.return()}finally{if(f)throw i}}}}function o(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function a(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.push.apply(n,t)}return n}function i(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){o(r,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}))}return r}var l={I:[[-1,0],[0,0],[1,0],[2,0]],O:[[0,1],[1,1],[0,0],[1,0]],T:[[0,1],[-1,0],[0,0],[1,0]],L:[[1,1],[-1,0],[0,0],[1,0]],J:[[-1,1],[-1,0],[0,0],[1,0]],Z:[[-1,1],[0,1],[0,0],[1,0]],S:[[0,1],[1,1],[-1,0],[0,0]]},f={I:[[[0,0],[-1,0],[2,0],[-1,0],[2,0]],[[-1,0],[0,0],[0,0],[0,1],[0,-2]],[[-1,1],[1,1],[-2,1],[1,0],[-2,0]],[[0,1],[0,1],[0,1],[0,-1],[0,2]]],O:[[[0,0]],[[0,-1]],[[-1,-1]],[[-1,0]]],T:[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]]],L:[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]]],J:[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]]],Z:[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]]],S:[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]]]},u=function(r,e){var n,o=Array.from({length:4},(function(){return Array(10).fill("")})),a=Array(4).fill(0),i=Array(4).fill(!1),l=t(e);try{for(l.s();!(n=l.n()).done;){var f,u=n.value,c=t(u.blocks);try{for(c.s();!(f=c.n()).done;){var s=f.value;o[s[1]+a[s[1]]][s[0]]=u.type}}catch(d){c.e(d)}finally{c.f()}for(var y=a.slice(),v=3;v>=0;v--)if(!i[v]){for(var h=0,p=0;p<10;p++)""===r[v][p]&&""===o[v][p]||h++;if(10===h){y.splice(v-a[v],1);for(var b=v-a[v];b<y.length;b++)y[b]++;y.push(y[y.length-1]),i[v]=!0}}a=y.slice()}}catch(d){l.e(d)}finally{l.f()}return o},c=function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,t=l[r].map((function(r){return[e+r[0],n+r[1]]}));return{blocks:t,type:r,perm:0,ox:e,oy:n}},s=function(r,e,n){var t=r.blocks.map((function(r){return[r[0]+e,r[1]+n]}));return i(i({},r),{},{blocks:t,ox:r.ox+e,oy:r.oy+n})},y=function(r,e){for(var n=(e%4+4)%4,t=r.blocks,o=0;o<n;o++)t=t.map((function(e){return[e[1]-r.oy+r.ox,-(e[0]-r.ox)+r.oy]}));return i(i({},r),{},{blocks:t,perm:(r.perm+n)%4})},v=function(r,e){var n,o=t(e.blocks);try{for(o.s();!(n=o.n()).done;){var a,i=n.value;if(void 0===(null===(a=r[i[1]])||void 0===a?void 0:a[i[0]])||r[i[1]][i[0]])return!0}}catch(l){o.e(l)}finally{o.f()}return!1};function h(r,e){var n,o=t(e.blocks);try{for(o.s();!(n=o.n()).done;){var a,i=n.value;if(i[1]>=r.length&&0<=i[0]&&i[0]<10);else if(void 0===(null===(a=r[i[1]])||void 0===a?void 0:a[i[0]])||r[i[1]][i[0]])return!0}}catch(l){o.e(l)}finally{o.f()}return!1}var p=function(r,e,n){var o,a=JSON.parse(JSON.stringify(r)),i=t(e);try{for(i.s();!(o=i.n()).done;){var l=o.value;l[0]<10&&l[1]<4&&(a[l[1]][l[0]]=n)}}catch(u){i.e(u)}finally{i.f()}for(var f=0;f<a.length;f++)a[f].includes("")||(a.splice(f,1),f--);return a};function b(r,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=n;o<r.length;o++){var a,i=t(r[o]);try{for(i.s();!(a=i.n()).done;){var l=a.value;if(l)return!1}}catch(y){i.e(y)}finally{i.f()}}var f,u=0,c=t(r);try{for(c.s();!(f=c.n()).done;){var s=f.value;u+=s.reduce((function(r,e){return r+(""===e?1:0)}),0)}}catch(y){c.e(y)}finally{c.f()}return u%4===0&&!(u/4>e.length)}function d(r,e){var n,o=t(e.blocks);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(0===a[1])return!0;if(r[a[1]-1][a[0]])return!0}}catch(i){o.e(i)}finally{o.f()}return!1}function g(r,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,t=[],o=0;o<4;o++){for(var a=0;a<10;a++)for(var i=0;i<n;i++){var l=y(c(e,a,i),o);!v(r,l)&&d(r,l)&&m(r,l,0)&&t.push(l)}if("O"===e&&o>0)break}return t}function m(r,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n>4)return!1;if(h(r,e))return!1;var o,a=!0,i=t(e.blocks);try{for(i.s();!(o=i.n()).done;){var l=o.value;if(!a)break;for(var u=0;u<r.length;u++){var c;if(null!==(c=r[l[1]+u])&&void 0!==c&&c[l[0]]){a=!1;break}}}}catch(A){i.e(A)}finally{i.f()}if(a)return!0;if(m(r,s(e,0,1),n+1)||m(r,s(e,-1,0),n+1)||m(r,s(e,1,0),n+1))return!0;if("O"!==e.type)for(var v=1;v<4;v++)for(var p=0;p<5;p++){var b=(e.perm+v+4)%4,d=[f[e.type][b][p][0]-f[e.type][e.perm][p][0],f[e.type][b][p][1]-f[e.type][e.perm][p][1]],g=y(s(e,-d[0],-d[1]),v);if(!h(r,g))for(var O=f[g.type],k=y(g,4-v),S=0;S<O[g.perm].length;S++){var j=[O[g.perm][S][0]-O[k.perm][S][0],O[g.perm][S][1]-O[k.perm][S][1]],w=s(k,j[0],j[1]);if(!h(r,w)){if(w.ox===e.ox&&w.oy===e.oy&&m(r,g,n+1))return!0;break}}}return!1}function O(r,e,o){for(var a=[{blocks:r,queue:e,hold:o,history:[]}],i=[];a.length>0;){var l=a.shift(),f=l.history.length>0?p(l.blocks,l.history[l.history.length-1].blocks,l.history[l.history.length-1].type):JSON.parse(JSON.stringify(l.blocks));if(0===f.length)i.push(l.history);else if(l.queue.length<=0&&null===l.hold);else{var u,c=t(g(f,l.queue[0],l.blocks.length));try{for(c.s();!(u=c.n()).done;){var s=u.value;a.push({blocks:f,queue:l.queue.slice(1),hold:l.hold,history:[].concat(n(l.history),[s])})}}catch(b){c.e(b)}finally{c.f()}var y,v=t(g(f,l.hold,l.blocks.length));try{for(v.s();!(y=v.n()).done;){var h=y.value;a.push({blocks:f,queue:l.queue.slice(1),hold:l.queue[0],history:[].concat(n(l.history),[h])})}}catch(b){v.e(b)}finally{v.f()}}}return i}onmessage=function(r){console.log("message received");var e,o=r.data,a=n(o.queue);e=null!=o.hold?o.hold:a.shift();var i,l=o.b.reduce((function(r,e,n){return e.some((function(r){return""!==r}))?n+1:r}),0),f=JSON.parse(JSON.stringify(o.b)).slice(0,Math.max(l,4));i=function(r,e){var n,o=[],a=[],i=t(e);try{for(i.s();!(n=i.n()).done;){var l,f=n.value,c=u(r,f),s=!1,y=t(a);try{for(y.s();!(l=y.n()).done;){var v=l.value;if(JSON.stringify(c)===JSON.stringify(v)){s=!0;break}}}catch(h){y.e(h)}finally{y.f()}s||(a.push(c),o.push(f))}}catch(h){i.e(h)}finally{i.f()}return o}(f,i=e&&0!==l?function(r,e,t){for(var o=[],a=1;a<5;a++)b(r,e,a)&&(o=[].concat(n(o),n(O(r,e,t,a))));return o}(f,a,e):[]),postMessage(i),console.log("finished.")}}();
//# sourceMappingURL=pc-finder.worker.d0e06fa6.worker.js.map