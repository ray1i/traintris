!function(){"use strict";function r(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function e(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function t(t){return function(e){if(Array.isArray(e))return r(e)}(t)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(r,t){var n="undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=e(r))||t&&r&&"number"===typeof r.length){n&&(r=n);var o=0,i=function(){};return{s:i,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,u=!1;return{s:function(){n=n.call(r)},n:function(){var r=n.next();return l=r.done,r},e:function(r){u=!0,a=r},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw a}}}}function o(r){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},o(r)}function i(r){var e=function(r,e){if("object"!==o(r)||null===r)return r;var t=r[Symbol.toPrimitive];if(void 0!==t){var n=t.call(r,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}(r,"string");return"symbol"===o(e)?e:String(e)}function a(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function l(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?a(Object(t),!0).forEach((function(e){var n,o,a;n=r,o=e,a=t[e],(o=i(o))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}var u={I:[[-1,0],[0,0],[1,0],[2,0]],O:[[0,1],[1,1],[0,0],[1,0]],T:[[0,1],[-1,0],[0,0],[1,0]],L:[[1,1],[-1,0],[0,0],[1,0]],J:[[-1,1],[-1,0],[0,0],[1,0]],Z:[[-1,1],[0,1],[0,0],[1,0]],S:[[0,1],[1,1],[-1,0],[0,0]]},f={I:[[[0,0],[-1,0],[2,0],[-1,0],[2,0]],[[-1,0],[0,0],[0,0],[0,1],[0,-2]],[[-1,1],[1,1],[-2,1],[1,0],[-2,0]],[[0,1],[0,1],[0,1],[0,-1],[0,2]]],O:[[[0,0]],[[0,-1]],[[-1,-1]],[[-1,0]]],T:[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]]],L:[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]]],J:[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]]],Z:[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]]],S:[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]]]},c=function(r,e){var t,o=Array.from({length:4},(function(){return Array(10).fill("")})),i=Array(4).fill(0),a=Array(4).fill(!1),l=n(e);try{for(l.s();!(t=l.n()).done;){var u,f=t.value,c=n(f.blocks);try{for(c.s();!(u=c.n()).done;){var s=u.value;o[s[1]+i[s[1]]][s[0]]=f.type}}catch(d){c.e(d)}finally{c.f()}for(var y=i.slice(),v=3;v>=0;v--)if(!a[v]){for(var h=0,p=0;p<10;p++)""===r[v][p]&&""===o[v][p]||h++;if(10===h){y.splice(v-i[v],1);for(var b=v-i[v];b<y.length;b++)y[b]++;y.push(y[y.length-1]),a[v]=!0}}i=y.slice()}}catch(d){l.e(d)}finally{l.f()}return o},s=function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{blocks:u[r].map((function(r){return[e+r[0],t+r[1]]})),type:r,perm:0,ox:e,oy:t}},y=function(r,e,t){var n=r.blocks.map((function(r){return[r[0]+e,r[1]+t]}));return l(l({},r),{},{blocks:n,ox:r.ox+e,oy:r.oy+t})},v=function(r,e){for(var t=(e%4+4)%4,n=r.blocks,o=0;o<t;o++)n=n.map((function(e){return[e[1]-r.oy+r.ox,-(e[0]-r.ox)+r.oy]}));return l(l({},r),{},{blocks:n,perm:(r.perm+t)%4})},h=function(r,e){var t,o=n(e.blocks);try{for(o.s();!(t=o.n()).done;){var i,a=t.value;if(void 0===(null===(i=r[a[1]])||void 0===i?void 0:i[a[0]])||r[a[1]][a[0]])return!0}}catch(l){o.e(l)}finally{o.f()}return!1};function p(r,e){var t,o=n(e.blocks);try{for(o.s();!(t=o.n()).done;){var i,a=t.value;if(a[1]>=r.length&&0<=a[0]&&a[0]<10);else if(void 0===(null===(i=r[a[1]])||void 0===i?void 0:i[a[0]])||r[a[1]][a[0]])return!0}}catch(l){o.e(l)}finally{o.f()}return!1}var b=function(r,e,t){var o,i=JSON.parse(JSON.stringify(r)),a=n(e);try{for(a.s();!(o=a.n()).done;){var l=o.value;l[0]<10&&l[1]<4&&(i[l[1]][l[0]]=t)}}catch(f){a.e(f)}finally{a.f()}for(var u=0;u<i.length;u++)i[u].includes("")||(i.splice(u,1),u--);return i};function d(r,e){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;t<r.length;t++){var o,i=n(r[t]);try{for(i.s();!(o=i.n()).done;){if(o.value)return!1}}catch(f){i.e(f)}finally{i.f()}}var a,l=0,u=n(r);try{for(u.s();!(a=u.n()).done;){l+=a.value.reduce((function(r,e){return r+(""===e?1:0)}),0)}}catch(f){u.e(f)}finally{u.f()}return l%4===0&&!(l/4>e.length)}function m(r,e){var t,o=n(e.blocks);try{for(o.s();!(t=o.n()).done;){var i=t.value;if(0===i[1])return!0;if(r[i[1]-1][i[0]])return!0}}catch(a){o.e(a)}finally{o.f()}return!1}function g(r,e){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=[],o=0;o<4;o++){for(var i=0;i<10;i++)for(var a=0;a<t;a++){var l=v(s(e,i,a),o);!h(r,l)&&m(r,l)&&O(r,l,0)&&n.push(l)}if("O"===e&&o>0)break}return n}function O(r,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t>4)return!1;if(p(r,e))return!1;var o,i=!0,a=n(e.blocks);try{for(a.s();!(o=a.n()).done;){var l=o.value;if(!i)break;for(var u=0;u<r.length;u++){var c;if(null!==(c=r[l[1]+u])&&void 0!==c&&c[l[0]]){i=!1;break}}}}catch(A){a.e(A)}finally{a.f()}if(i)return!0;if(O(r,y(e,0,1),t+1)||O(r,y(e,-1,0),t+1)||O(r,y(e,1,0),t+1))return!0;if("O"!==e.type)for(var s=1;s<4;s++)for(var h=0;h<5;h++){var b=(e.perm+s+4)%4,d=[f[e.type][b][h][0]-f[e.type][e.perm][h][0],f[e.type][b][h][1]-f[e.type][e.perm][h][1]],m=v(y(e,-d[0],-d[1]),s);if(!p(r,m))for(var g=f[m.type],S=v(m,4-s),k=0;k<g[m.perm].length;k++){var j=[g[m.perm][k][0]-g[S.perm][k][0],g[m.perm][k][1]-g[S.perm][k][1]],w=y(S,j[0],j[1]);if(!p(r,w)){if(w.ox===e.ox&&w.oy===e.oy&&O(r,m,t+1))return!0;break}}}return!1}function S(r,e,o){for(var i=[{blocks:r,queue:e,hold:o,history:[]}],a=[];i.length>0;){var l=i.shift(),u=l.history.length>0?b(l.blocks,l.history[l.history.length-1].blocks,l.history[l.history.length-1].type):JSON.parse(JSON.stringify(l.blocks));if(0===u.length)a.push(l.history);else if(l.queue.length<=0&&null===l.hold);else{var f,c=n(g(u,l.queue[0],l.blocks.length));try{for(c.s();!(f=c.n()).done;){var s=f.value;i.push({blocks:u,queue:l.queue.slice(1),hold:l.hold,history:[].concat(t(l.history),[s])})}}catch(p){c.e(p)}finally{c.f()}var y,v=n(g(u,l.hold,l.blocks.length));try{for(v.s();!(y=v.n()).done;){var h=y.value;i.push({blocks:u,queue:l.queue.slice(1),hold:l.queue[0],history:[].concat(t(l.history),[h])})}}catch(p){v.e(p)}finally{v.f()}}}return a}onmessage=function(r){console.log("message received");var e,o=r.data,i=t(o.queue);e=null!=o.hold?o.hold:i.shift();var a,l=o.b.reduce((function(r,e,t){return e.some((function(r){return""!==r}))?t+1:r}),0),u=JSON.parse(JSON.stringify(o.b)).slice(0,Math.max(l,4));a=function(r,e){var t,o=[],i=[],a=n(e);try{for(a.s();!(t=a.n()).done;){var l,u=t.value,f=c(r,u),s=!1,y=n(i);try{for(y.s();!(l=y.n()).done;){var v=l.value;if(JSON.stringify(f)===JSON.stringify(v)){s=!0;break}}}catch(h){y.e(h)}finally{y.f()}s||(i.push(f),o.push(u))}}catch(h){a.e(h)}finally{a.f()}return o}(u,a=e&&0!==l?function(r,e,n){for(var o=[],i=1;i<5;i++)d(r,e,i)&&(o=[].concat(t(o),t(S(r,e,n,i))));return o}(u,i,e):[]),postMessage(a),console.log("finished.")}}();
//# sourceMappingURL=pc-finder.worker.4e19e784.worker.js.map